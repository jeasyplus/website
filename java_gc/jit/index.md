# JIT优化


对调用热点代码（频繁的方法和代码块）直接统计成机器码并进行优化和缓存。

## 热点检测

周期性的检测各个线程的栈顶，发现经常出现在栈顶的方法，就是热点方法。

为每个方法和代码块建立计数器，超过某个阀值就是热点。HotSpot为每个方法准备了两上计数器：方法计数和回边计数。

## 逃逸分析

在方法中创建的对象，会被外部引用时，就称为对象逃逸。

```text
-XX:+DoEscapeAnalysis
```
如果没有逃逸，就可以进行相关优化：

省略**同步处理**

将堆分配转换为栈分配。

分离对象或标量替换。
标量：无法再分解的数据，如：原始数据类型。
聚合量：可以再分解的数据，如：Javac对象。












